# 비동기 프로그래밍
- 비동기 프로그래밍의 각 기법을 심층적으로 알아보기 전에, 콜백(callback), 프로미스(promise), 비동기(async/await)의 차이점을 간략하게 알아보자.
```ts
// 콜백 사용 예시
function makeRequest(url, callback) {
    fetch(url)
        .then(response => response.json())
        .then(data => callback(null,data))
        .catch(error => callback(error));
}

makeRequest('http://example.com/', (error, data) => {
    if (error) {
        console.error(error);
    } else {
        console.log(data);
    }
})
```
- 첫 번째 예제의 makeRequest 함수는 콜백을 사용하여 네트워크 요청의 결과를 반환한다.
- 호출자는 makeRequest 함수에 콜백(callback) 함수를 전달하고, 이 콜백 함수는 결과 데이터 또는 에러를 매개 변수로 가져와 사용할 수 있다.

```ts
// promise 사용 예시
function makeRequest(url) {
    return new Promise((resolve, reject) => {
        fetch(url)
            .then(response => response.json())
            .then(data => resolve(data))
            .catch(error => reject(error));
    });
}

makeRequest('http://example.com/')
    .then(data => console.log(data))
    .catch(error => console.error(error));
```
- 두 번째 예제의 makeRequest 함수는 네트워크 요청의 결과로 해결되거나 에러로 거부되는 Promise 객체를 반환한다.
- 호출자는 이 Promise 객체의 .then 메서드와 .catch 메서드를 사용하여 요청 결과를 처리할 수 있다.

```ts
// async/await 사용 예시
async function makeRequest(url) {
    try {
        const response = await fetch(url);
        const data = await response.json();
        console.log(data);
    } catch (error) {
        console.error(error);
    }
}

makeRequest('http://example.com/');
```
- 세 번째 예제의 makeRequest 함수는 async 키워드로 선언되어, 네트워크 요청의 결과를 기다리기 위해 await 키워드를 사용할 수 있다.
- 호출자는 함수 실행 중 발생할 수 있는 에러를 처리하기 위해 try-catch 키워드를 사용할 수 있다.

# 실용적인 예제 더보기
## HTTP 요청 보내기
```ts
async function makeRequest(url) {
    try {
        const response = await fetch(url);
        const data = await response.json();
        console.log(data);
    } catch (error) {
        console.error(error);
    }
}
```

## 파일 시스템에서 파일 읽어오기
```ts
async function readFile(filePath) {
    try {
        const fileData = await fs.promise.readFile(filePath);
        console.log(fileData);
    } catch (error) {
        console.error(error);
    }
}
```

## 파일 시스템에 파일 쓰기
```ts
async function writeFile(filePath, data) {
    try {
        await fs.promises.writeFile(filePath, data);
        console.log("File written successfully.");
    } catch (error) {
        console.error(error);
    }
}
```

## 여러 비동기 함수를 한 번에 실행하기
```ts
async function main() {
    try {
        const data1 = await makeRequest1();
        const data2 = await makeRequest2();
        console.log(data1, data2);
    } catch (error) {
        console.error(error);
    }
}
```

## 함수의 결과를 캐싱하기
```ts
const cache = new Map();

async function makeRequest(url) {
    if (cache.has(url)) {
        return cache.get(url);
    }

    try {
        const response = await fetch(url);
        const data = await response.json();
        cache.set(url, data);
        return data;
    } catch (error) {
        throw error;
    }
}
```

